DROP TABLE IF EXISTS users, categories, compilations, events, eventscompilations, requests CASCADE;

CREATE TABLE IF NOT EXISTS users (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR (250) NOT NULL,
    email VARCHAR (255) NOT NULL UNIQUE
);
CREATE TABLE IF NOT EXISTS categories (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR (250) NOT NULL UNIQUE
);
CREATE TABLE IF NOT EXISTS compilations (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    pinned BOOLEAN NOT NULL,
    title VARCHAR (50) NOT NULL,
);
CREATE TABLE IF NOT EXISTS events (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    annotation VARCHAR (2000) NOT NULL,
    description VARCHAR (7000) NOT NULL,
    description VARCHAR (7000) NOT NULL,
    eventDate TIMESTAMP WITHOUT TIME ZONE,
    lat FLOAT NOT NULL,
    lon FLOAT NOT NULL,
    paid BOOLEAN NOT NULL,
    participantLimit INTEGER NOT NULL,
    requestModeration BOOLEAN NOT NULL,
    title VARCHAR (120) NOT NULL,
    user_id BIGINT REFERENCES users (id) ON DELETE CASCADE,
);
CREATE TABLE IF NOT EXISTS eventscompilations (
    id_events BIGINT REFERENCES events (id) ON DELETE CASCADE,
    id_compilations BIGINT REFERENCES compilations (id) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS requests (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    created TIMESTAMP WITHOUT TIME ZONE,
    requester_id BIGINT REFERENCES users (id) ON DELETE CASCADE,
    id_events BIGINT REFERENCES events (id) ON DELETE CASCADE,
    status VARCHAR(255) NOT NULL
);